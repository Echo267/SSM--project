<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
</head>
<link rel="stylesheet" href="/css/sign.css">
<body>
<div class="main">
  <div class="title">
    <span>新用户注册</span>
  </div>

  <div class="title-msg">
    <span>请输入注册信息</span>
  </div>

  <form class="login-form" action="/user/API/reg" th:object="${user}" method="post" name="user">

    <!--输入框-->
    <div class="input-content">
      <!--autoFocus-->
      <div>
        <input type="text" autocomplete="off"
               placeholder="用户名" name="userName" />
      </div>
      <div th:classappend="${#fields.hasErrors('userName')} ? 'error' : ''">
        <p th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"></p>
      </div>

      <div>
        <input type="password"
               autocomplete="off" placeholder="登录密码" name="userPwd"  maxlength="32"/>
      </div>
      <div th:classappend="${#fields.hasErrors('userPwd')} ? 'error' : ''">
        <p th:if="${#fields.hasErrors('userPwd')}" th:errors="*{userPwd}"></p>
      </div>

    </div>

    <!--登入按钮-->
    <div style="text-align: center">

      <button type="submit" class="enter-btn" >
       注册</button>
    </div>
    <span><a href="/user/login">返回登陆</a></span>

    <div class="foor">
    </div>
  </form>
  <div th:if="${errorMessage}">
    <p th:text="${errorMessage}"></p>
  </div>
</div>
</body>
<!--<script>-->
<!--  const Form = document.querySelector("form");-->
<!--  //表单提交事件-->
<!--  Form.addEventListener('submit',function (){-->
<!--    //构造表单数据-->
<!--    const formData = new FormData(Form);-->
<!--    //发送Post请求-->
<!--    //receive(formData);-->
<!--    fetch('/user/API/reg', {-->
<!--      method: 'POST',-->
<!--      body: formData-->
<!--    })-->
<!--            .then(response => {-->

<!--              if (response.ok) {-->
<!--                // 注册成功，重定向到主界面-->
<!--                alert("注册成功")-->
<!--                console.log(response.status);-->
<!--                window.location.href ='/user/login';-->
<!--              } else {-->

<!--                console.log(response.status);-->
<!--                // 注册失败，弹出错误提示-->
<!--                alert('注册失败请仔细检查');-->
<!--                console.log(response.status);-->
<!--                //跳转到后端的相应路径中-->
<!--                window.location.href ='/user/register';-->

<!--              }-->
<!--            })-->
<!--            .catch(error => {-->

<!--              console.error('登录请求出错：', error);-->
<!--            });-->

<!--  })-->
<!--  function receive (formData) {-->


<!--  }-->

<!--</script>-->
</html>